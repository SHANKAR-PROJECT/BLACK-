#!/usr/bin/env node

const cp = require('child_process');

const utils = require('./utils');

const cmd = process.argv[2] || '';
const helpContent = `
usage: khang [command]

available commands:

    help      Show this message
    who       About Khang
    hi        Say "Hi" to Khang
    finetx    Say "I'm fine, thanks" to Khang

`;

switch (cmd.replace(/[!\?\.]/g, '').toLowerCase()) {
  case 'help':
  case '--help':
  case '-h':
  default:
    showHelp();
    break;

  case 'who':
    runBash('npx khangdinh');
    break;

  case 'hi':
  case 'hello':
    console.log('Hi, how are you?');
    break;

  case 'finetx':
  case 'I\'m fine, thank you':
  case 'I\'m fine, thanks':
    console.log('Good. C\'ya!');
    break;

  case 'util':
  case 'utils':
    utils.run(cmd);
    break;
}

function showHelp() {
  console.log(helpContent);
}

function runBash(cmd) {
  cp.exec(cmd, (err, stdout, stderr) => {
    console.error(stderr);
    console.log(stdout);
  });
}